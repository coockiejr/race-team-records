angular.module("mcrrcApp",["restangular","ui.bootstrap","ui.router","appRoutes","MainCtrl","TeamCtrl","LoginCtrl","SignUpCtrl","ProfileCtrl","MemberService"]),angular.module("LoginCtrl",[]).controller("LoginController",function($scope,$http,$state){$scope.tagline="Nothing beats a pocket protector!",$http({url:"/api/login",method:"GET"}).success(function(data){$scope.message=data.message}),$scope.login=function(user){$http.post("/api/login",user).success(function(){window.location.href="/"}).error(function(data){$scope.message=data[0],$state.go("/login")})}}),angular.module("MainCtrl",[]).controller("MainController",function(){}),angular.module("ProfileCtrl",[]).controller("ProfileController",function($scope,$http){$http({url:"/api/profile",method:"GET"}).success(function(data){$scope.user=data.user})}),angular.module("SignUpCtrl",[]).controller("SignUpController",function($scope,$http,$state){$scope.signup=function(user){$http.post("/api/signup",user).success(function(){window.location.href="/"}).error(function(data){$scope.message=data[0],$state.go("/signup")})}}),angular.module("TeamCtrl",[]).controller("TeamController",["$scope","$http","Restangular",function($scope,$http,Restangular){Restangular.setBaseUrl("/api/");var members=Restangular.all("members");$scope.formData={},$scope.membersList=[],$scope.adminDivisCollapsed=!0,$scope.adminEditMode=!1,$scope.today=function(){$scope.formData.dateofbirth=new Date},$scope.today(),$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.retrieveMemberForEdit=function(id){$http.get("/api/members/"+id).success(function(member){member&&($scope.formData=member,$scope.adminEditMode=!0,$scope.adminDivisCollapsed=!1)}).error(function(data){console.log("Error: "+data)})},$scope.setMember=function(member){$scope.currentMember=member,$scope.getMember(member._id)},$scope.user=data.user,Restangular.all("members").getList().then(function(members){$scope.membersList=members}),$scope.getMember=function(id){return Restangular.one("members",id).get().then(function(member){return member},function(res){console.log("Error: "+res.status)})},$scope.createMember=function(){members.post($scope.formData)},$scope.editMember=function(){console.log($scope.formData)},$scope.deleteMember=function(id){$http["delete"]("/api/members/"+id).success(function(data){$scope.members=data,console.log(data)}).error(function(data){console.log("Error: "+data)})}}]),angular.module("appRoutes",[]).config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("/",{url:"/",controller:"MainController",templateUrl:"views/home.html"}).state("/team",{url:"/team",templateUrl:"views/team.html",controller:"TeamController"}).state("/login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController"}).state("/signup",{url:"/signup",templateUrl:"views/signup.html",controller:"SignUpController"}).state("/profile",{url:"/profile",templateUrl:"views/profile.html",controller:"ProfileController"})}),angular.module("MemberService",[]).factory("Member",function(){});